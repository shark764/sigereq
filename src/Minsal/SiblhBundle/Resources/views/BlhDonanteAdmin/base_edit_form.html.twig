{% block form %}
    {{ sonata_block_render_event('sonata.admin.edit.form.top', { 'admin': admin, 'object': object }) }}

    {% set url = admin.id(object) is not null ? 'edit' : 'create' %}

    {% if not admin.hasRoute(url)%}
        <div>
            {{ "form_not_available"|trans({}, "SonataAdminBundle") }}
        </div>
    {% else %}
        <form
              class="form-horizontal"
              role="form"
              action="{{ admin.generateUrl(url, {'id': admin.id(object), 'uniqid': admin.uniqid, 'subclass': app.request.get('subclass')}) }}" {{ form_enctype(form) }}
              method="POST"
              novalidate="novalidate"
              data-clientside-validation="page"
              {% block simagd_apply_custom_formid %}
                  {# can add a custom id to the form #}
                  id="_blh_entity_full_admin_form"
              {% endblock %}
              {% block simagd_apply_custom_formname %}
                  {# can add a name to the form #}
                  name="_full_admin_form"
              {% endblock %}
              >
            {% if form.vars.errors|length > 0 %}
                <div class="sonata-ba-form-error">
                    {{ form_errors(form) }}
                </div>
            {% endif %}

            {% block sonata_pre_fieldsets %}
                <div class="row"> <!-- row block -->
            {% endblock %}

            <div class="col-lg-12 col-md-12 col-sm-12"> <!-- form block -->

                {% block simagd_apply_custom_firstbox %}
                    {% if object.getIdExpediente() is null %}
                        <div class="{#col-lg-10 col-md-10 col-sm-10 col-xs-offset-1#} col-lg-12 col-md-12 col-sm-12">
                            <div class="box box-primary">
                                <div class="box-body">
                                    <div class="row">

                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <div class="row"><div class="col-lg-12 col-md-12 col-sm-12 data-box-row"><h5>BÚSQUEDA DE EXPEDIENTES <small>(Pacientes registrados en Establecimiento)</small></h5></div></div>
                                            {#<form class="form-horizontal" role="search">#}
                                                <div class="row">
                                                    <div class="col-xs-12 col-lg-12 col-md-12 col-sm-12">
                                                        <div class="form-group">
                                                            <label class="col-xs-4 col-lg-4 col-md-4 col-sm-4 control-label input-sm">¿El donante posee expediente en este Establecimiento?</label>
                                                            <div class="col-xs-8 col-lg-8 col-md-8 col-sm-8">
                                                                <ul class="list-unstyled list-inline formstyle-radio-list-inline input-sm col-lg-12 col-md-12 col-sm-12" id="DONOR_SEARCHDONOR_{{ admin.uniqId }}[search_donor_type]">
                                                                    <li>
                                                                        <label class="">
                                                                            <input type="radio" checked="checked" value="F" name="DONOR_SEARCHDONOR_{{ admin.uniqId }}[search_donor_type]" id="DONOR_SEARCHDONOR_{{ admin.uniqId }}_search_donor_type_0">
                                                                            <span style="margin-left: 5px;">No</span>
                                                                        </label>
                                                                    </li>
                                                                    <li>
                                                                        <label class="">
                                                                            <input type="radio" value="T" name="DONOR_SEARCHDONOR_{{ admin.uniqId }}[search_donor_type]" id="DONOR_SEARCHDONOR_{{ admin.uniqId }}_search_donor_type_1">
                                                                            <span style="margin-left: 5px;">Si</span>
                                                                        </label>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" style="display: none;"{# #}>
                                                            <label class="col-xs-4 col-lg-4 col-md-4 col-sm-4 control-label input-sm">EXPEDIENTE</label>
                                                            <div class="col-xs-8 col-lg-8 col-md-8 col-sm-8">
                                                                <input type="hidden" id="DONOR_SEARCHDONOR_{{ admin.uniqId }}_search_patient" name="DONOR_SEARCHDONOR_{{ admin.uniqId }}[search_patient]" class="form-control input-sm" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group" style="display: none;"{# #}>
                                                            <div class="col-xs-8 col-lg-8 col-md-8 col-sm-8 col-xs-offset-4">
                                                                <div class="btn-toolbar" role="toolbar" aria-label="...">
                                                                    {% if is_granted('ROLE_MINSAL_SIAPS_ADMIN_MNT_EXPEDIENTE_CREATE') or is_granted('ROLE_ADMIN') %}
                                                                        <div class="btn-group" role="group" aria-label="...">
                                                                            <a class="btn btn-sm btn-primary" href="javascript:void(0)" onclick="searchPatientInSiap(this); return false;" id="DONOR_SEARCHDONOR_{{ admin.uniqId }}_search_donor_in_siap" name="DONOR_SEARCHDONOR_{{ admin.uniqId }}[search_donor_in_siap]" disabled="disabled"{# #}><span class="glyphicon glyphicon-cloud"></span>{# #}&nbsp; Buscar en SIAP</a>
                                                                        </div>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {#</form>#}
                                        </div>

                                        <div class="col-lg-6 col-md-6 col-sm-6 ">
                                            <div class="row"> <!-- row block -->
                                                <div id="DONOR_SEARCHDONOR_{{ admin.uniqId }}_short_info_container"></div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endblock %}

                {% block sonata_tab_content %} {% include 'MinsalSiblhBundle:CRUD:block_sonata_tab_content.html.twig' %} {% endblock %}

                {% block formactions %} {% include 'MinsalSiblhBundle:CRUD:block_formactions.html.twig' %} {% endblock formactions %}
            
            </div> <!-- end form block -->

            {% block sonata_post_fieldsets %}
                </div> <!-- end row block -->
            {% endblock %}

            {{ form_rest(form) }}
        </form>
    {% endif%}

    {{ sonata_block_render_event('sonata.admin.edit.form.bottom', { 'admin': admin, 'object': object }) }}

{% endblock %}