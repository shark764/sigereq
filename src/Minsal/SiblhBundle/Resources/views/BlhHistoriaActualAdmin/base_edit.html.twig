{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{#{% extends base_template %}#}
{% extends 'MinsalSiblhBundle:CRUD:base_edit.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    
    {# bootstrap-switch #}
    <link href="{{ asset('bundles/minsalsiblh/plugin/bootstrap-switch-master/dist/css/bootstrap3/bootstrap-switch.min.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% use 'MinsalSiblhBundle:BlhHistoriaActualAdmin:base_edit_form.html.twig' with form as parentForm %}

{% block form %}
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="make-switch switch-large">
          <input type="checkbox" name="my-checkbox" checked>
         {# <div class="make-switch" data-on="primary" data-off="info">
            <input type="checkbox" checked name="my-checkbox">
            <div id="label-switch" class="make-switch" data-on-label="SIM" data-off-label="NÃƒO">
              <input type="checkbox" checked name="my-checkbox">
            </div>
          </div>#}
        </div>
      </div>
    </div>
  </div>

    {{ block('parentForm') }}

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    {# bootstrap-switch #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/bootstrap-switch-master/dist/js/bootstrap-switch.min.js') }}" ></script>

    <script type="text/javascript">

        jQuery(document).ready(function() {
{#            jQuery('#{{ admin.uniqId }}_donanteApta').iCheck('destroy').bootstrapSwitch();#}
{#            jQuery('#{{ admin.uniqId }}_donanteApta').iCheck('destroy');#}
            jQuery('[name="{{ admin.uniqId }}[donanteApta]"]').bootstrapSwitch();
            $("[name='my-checkbox']").bootstrapSwitch();
            window.console.log('donanteApta', jQuery('#{{ admin.uniqId }}_donanteApta').attr('name'));
            
            //////////////////////////////////////////////////////////////////////////////////////////////
            //////// calculate value
            //////////////////////////////////////////////////////////////////////////////////////////////
            jQuery('#{{ admin.uniqId }}_pesoDonante, #{{ admin.uniqId }}_tallaDonante').on('keyup change blur', function (e) {
                var pesoDonante = parseFloat(jQuery('#{{ admin.uniqId }}_pesoDonante').val());
                var tallaDonante = parseFloat(jQuery('#{{ admin.uniqId }}_tallaDonante').val());

                if (isNaN(pesoDonante) || jQuery.trim(pesoDonante).length === 0) {
                    pesoDonante = 0;
                }
                if (isNaN(tallaDonante) || jQuery.trim(tallaDonante).length === 0) {
                    jQuery('#{{ admin.uniqId }}_imc').val(0);
                    return;
                }
                var imc = pesoDonante / Math.pow(tallaDonante, 2);
                jQuery('#{{ admin.uniqId }}_imc').val(imc.toFixed(2));
            });
            //////////////////////////////////////////////////////////////////////////////////////////////
        });

    </script>
{% endblock %}