{% block form %}
    {{ sonata_block_render_event('sonata.admin.edit.form.top', { 'admin': admin, 'object': object }) }}

    {% set url = admin.id(object) is not null ? 'edit' : 'create' %}

    {% if not admin.hasRoute(url)%}
        <div>
            {{ "form_not_available"|trans({}, "SonataAdminBundle") }}
        </div>
    {% else %}
        <form
              class="form-horizontal"
              role="form"
              action="{{ admin.generateUrl(url, {'id': admin.id(object), 'uniqid': admin.uniqid, 'subclass': app.request.get('subclass')}) }}" {{ form_enctype(form) }}
              method="POST"
              novalidate="novalidate"
              data-clientside-validation="page"
              {% block simagd_apply_custom_formid %}
                  {# can add a custom id to the form #}
                  id="_blh_entity_full_admin_form"
              {% endblock %}
              {% block simagd_apply_custom_formname %}
                  {# can add a name to the form #}
                  name="_full_admin_form"
              {% endblock %}
              >
            {% if form.vars.errors|length > 0 %}
                <div class="sonata-ba-form-error">
                    {{ form_errors(form) }}
                </div>
            {% endif %}

            {% block sonata_pre_fieldsets %}
                <div class="row"> <!-- row block -->
            {% endblock %}

            <div class="col-lg-12 col-md-12 col-sm-12"> <!-- form block -->

                {% block simagd_apply_custom_firstbox %}
                    {% if object.getIdDonante() is null %}
                        <div class="{#col-lg-10 col-md-10 col-sm-10 col-xs-offset-1#} col-lg-12 col-md-12 col-sm-12">
                            <div class="box box-primary">
                                <div class="box-body">
                                    <div class="row">

                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <div class="row"><div class="col-lg-12 col-md-12 col-sm-12 data-box-row"><h5>BÚSQUEDA DE DONANTES <small>(Especifique establecimiento donde se encuentra registrado)</small></h5></div></div>
                                            {#<form class="form-horizontal" role="search">#}
                                                <div class="row">
                                                    <div class="col-xs-12 col-lg-12 col-md-12 col-sm-12">
                                                        <div class="form-group">
                                                            <label class="col-xs-4 col-lg-4 col-md-4 col-sm-4 control-label input-sm">TIPO</label>
                                                            <div class="col-xs-8 col-lg-8 col-md-8 col-sm-8">
                                                                <ul class="list-unstyled list-inline formstyle-radio-list-inline input-sm col-lg-12 col-md-12 col-sm-12" id="DONATION_SEARCHDONOR_{{ admin.uniqId }}_search_donor_type_location">
                                                                    <li>
                                                                        <label class="">
                                                                            <input type="radio" {% if app.user.getIdCentroRecoleccion() is not null %}checked="checked"{% endif %} value="ctr" name="DONATION_SEARCHDONOR_{{ admin.uniqId }}[search_donor_type_location]" id="DONATION_SEARCHDONOR_{{ admin.uniqId }}_search_donor_type_location_0">
                                                                            <span style="margin-left: 5px;">CENTRO DE RECOLECCIÓN</span>
                                                                        </label>
                                                                    </li>
                                                                    <li>
                                                                        <label class="">
                                                                            <input type="radio" {% if app.user.getIdBancoDeLeche() is not null %}checked="checked"{% endif %} value="blh" name="DONATION_SEARCHDONOR_{{ admin.uniqId }}[search_donor_type_location]" id="DONATION_SEARCHDONOR_{{ admin.uniqId }}_search_donor_type_location_1">
                                                                            <span style="margin-left: 5px;">BANCO DE LECHE</span>
                                                                        </label>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-xs-4 col-lg-4 col-md-4 col-sm-4 control-label input-sm">ESTABLECIMIENTO</label>
                                                            <div class="col-xs-8 col-lg-8 col-md-8 col-sm-8">
                                                                <input type="hidden" id="DONATION_SEARCHDONOR_{{ admin.uniqId }}_search_donor_location" name="DONATION_SEARCHDONOR_{{ admin.uniqId }}[search_donor_location]" class="form-control input-sm" {% if app.user.getIdBancoDeLeche() is not null %}value="{{ app.user.getIdBancoDeLeche().getId()|e('js') }}"{% elseif app.user.getIdCentroRecoleccion() is not null %}value="{{ app.user.getIdCentroRecoleccion().getId()|e('js') }}"{% endif %} />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-xs-4 col-lg-4 col-md-4 col-sm-4 control-label input-sm">DONANTE</label>
                                                            <div class="col-xs-8 col-lg-8 col-md-8 col-sm-8">
                                                                <input type="hidden" id="DONATION_SEARCHDONOR_{{ admin.uniqId }}_search_donor" name="DONATION_SEARCHDONOR_{{ admin.uniqId }}[search_donor]" class="form-control input-sm" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {#</form>#}
                                        </div>

                                        <div class="col-lg-6 col-md-6 col-sm-6 ">
                                            <div class="row"> <!-- row block -->
                                                <div id="DONATION_SEARCHDONOR_{{ admin.uniqId }}_short_info_container"></div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endblock %}

                {% block sonata_tab_content %}
                    {% for name, form_group in admin.formgroups %}
                        <div class="{{ form_group.class|default('col-md-12') }}">
                            <div class="box box-success">
                                <div class="box-header">
                                    <h4 class="box-title">
                                        <span class="text-black-thrash">{{ admin.trans(name, {}, form_group.translation_domain) }}</span>
                                    </h4>
                                </div>
                                {#<div class="box{% if loop.first %} in{% endif %}" id="{{ admin.uniqid }}_{{ loop.index }}">#}
                                    <div class="box-body">
                                        <div class="sonata-ba-collapsed-fields">
                                            {% if form_group.description != false %}
                                                <p>{{ form_group.description|raw }}</p>
                                            {% endif %}

                                            <div class="form-group form-group-collapsed-fields" id="sonata-ba-field-container-s595fa7942ef65_formulaObstetrica">
                                                <label class="label_form_sm control-label " for="s595fa7942ef65_formulaObstetrica" style="padding-left: 30px;">Fórmula Obstétrica</label>

                                                <div class="col-lg-12 col-md-12 col-sm-12 sonata-ba-field sonata-ba-field-standard-natural  ">
                                                    <div class="col-md-2 col-lg-2 col-sm-2 col-xs-2">
                                                        {{ form_label(form.formulaObstetricaG) }}
                                                        {{ form_errors(form.formulaObstetricaG) }}
                                                        {{ form_widget(form.formulaObstetricaG) }}
                                                    </div>
                                                    <div class="col-md-2 col-lg-2 col-sm-2 col-xs-2">
                                                        {{ form_label(form.formulaObstetricaP1) }}
                                                        {{ form_errors(form.formulaObstetricaP1) }}
                                                        {{ form_widget(form.formulaObstetricaP1) }}
                                                    </div>
                                                    <div class="col-md-2 col-lg-2 col-sm-2 col-xs-2">
                                                        {{ form_label(form.formulaObstetricaP2) }}
                                                        {{ form_errors(form.formulaObstetricaP2) }}
                                                        {{ form_widget(form.formulaObstetricaP2) }}
                                                    </div>
                                                    <div class="col-md-2 col-lg-2 col-sm-2 col-xs-2">
                                                        {{ form_label(form.formulaObstetricaA) }}
                                                        {{ form_errors(form.formulaObstetricaA) }}
                                                        {{ form_widget(form.formulaObstetricaA) }}
                                                    </div>
                                                    <div class="col-md-2 col-lg-2 col-sm-2 col-xs-2">
                                                        {{ form_label(form.formulaObstetricaV) }}
                                                        {{ form_errors(form.formulaObstetricaV) }}
                                                        {{ form_widget(form.formulaObstetricaV) }}
                                                    </div>
                                                    <div class="col-md-2 col-lg-2 col-sm-2 col-xs-2">
                                                        {{ form_label(form.formulaObstetricaM) }}
                                                        {{ form_errors(form.formulaObstetricaM) }}
                                                        {{ form_widget(form.formulaObstetricaM) }}
                                                    </div>
                                                </div>
                                            </div>

                                            {#{{ form_row(form.idDonante) }}
                                            {{ form_row(form.edadGestFur) }}
                                            {{ form_row(form.idEstablecimiento) }}
                                            {{ form_row(form.controlPrenatal) }}
                                            {{ form_row(form.lugarControl) }}
                                            {{ form_row(form.numeroControl) }}
                                            {{ form_row(form.fechaParto) }}
                                            {{ form_row(form.lugarParto) }}
                                            {{ form_row(form.patologiaEmbarazo) }}
                                            {{ form_row(form.periodoIntergenesico) }}
                                            {{ form_row(form.fechaPartoAnterior) }}#}
                                            
                                            {% for field_name in form_group.fields %}
                                                {% if admin.formfielddescriptions[field_name] is defined %}
                                                    {{ form_row(form[field_name])}}
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                {#</div>#}
                            </div>
                        </div>
                    {% endfor %}
                {% endblock %}

                {% block formactions %} {% include 'MinsalSiblhBundle:CRUD:block_formactions.html.twig' %} {% endblock formactions %}
            
            </div> <!-- end form block -->

            {% block sonata_post_fieldsets %}
                </div> <!-- end row block -->
            {% endblock %}

            {{ form_rest(form) }}
        </form>
    {% endif%}

    {{ sonata_block_render_event('sonata.admin.edit.form.bottom', { 'admin': admin, 'object': object }) }}

{% endblock %}