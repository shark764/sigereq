{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{#{% extends base_template %}#}
{% extends 'MinsalSiblhBundle:CRUD:base_edit.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    
    {# Bootstrap-calendar #}
    <link href="{{ asset('bundles/minsalsiblh/plugin/bootstrap-datetimepicker-master/build/css/bootstrap-datetimepicker.min.css') }}" type="text/css" rel="stylesheet" />

    {# bootstrap-table #}
    <link href="{{ asset('bundles/minsalsiblh/plugin/bootstrap-table-master/dist/bootstrap-table.min.css') }}" type="text/css" rel="stylesheet" media="screen" />
    
    {# bootstrap-modal #}

    {# bootstrap sweetalert #}
    <link href="{{ asset('bundles/minsalsiblh/plugin/bootstrap-sweetalert-master/dist/sweetalert.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('bundles/minsalsiblh/css/sweetalert.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% use 'MinsalSiblhBundle:CRUD:base_edit_form.html.twig' with form as parentForm %}

{% block form %}

    {{ block('parentForm') }}

    {% include 'MinsalSiblhBundle:BlhPasteurizacionAdmin:untitled.html.twig' %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    {# Bootstrap-calendar #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/moment-develop/min/moment-with-locales.min.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/bootstrap-datetimepicker-master/build/js/bootstrap-datetimepicker.min.js') }}" ></script>

    {# bootstrap-table #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/bootstrap-table-master/dist/bootstrap-table.min.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/bootstrap-table-master/dist/locale/bootstrap-table-es-CR.min.js') }}" ></script>
    
    {# bootstrap-modal #}

    {# bootstrap sweetalert #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/bootstrap-sweetalert-master/dist/sweetalert.min.js') }}" ></script>

    <script type="text/javascript">

        jQuery(document).ready(function() {
            //////////////////////////////////////////////////////////////////////////////////////////////
            //////// calculate value
            //////////////////////////////////////////////////////////////////////////////////////////////
            jQuery('#{{ admin.uniqId }}_volumenPasteurizado, #{{ admin.uniqId }}_numFrascosPasteurizados').on('keyup change blur', function (e) {
                var volumenPasteurizado = parseFloat(jQuery('#{{ admin.uniqId }}_volumenPasteurizado').val());
                var numFrascosPasteurizados = parseFloat(jQuery('#{{ admin.uniqId }}_numFrascosPasteurizados').val());

                if (isNaN(volumenPasteurizado) || jQuery.trim(volumenPasteurizado).length === 0) {
                    volumenPasteurizado = 0;
                }
                if (isNaN(numFrascosPasteurizados) || jQuery.trim(numFrascosPasteurizados).length === 0) {
                    jQuery('#{{ admin.uniqId }}_volumenTotal').val(0);
                    return;
                }
                var volumenTotal = volumenPasteurizado * numFrascosPasteurizados;
                jQuery('#{{ admin.uniqId }}_volumenTotal').val(volumenTotal.toFixed(2));
            });
            //////////////////////////////////////////////////////////////////////////////////////////////
        });

    </script>
{% endblock %}