{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{#{% extends base_template %}#}
{% extends 'MinsalSiblhBundle:CRUD:base_edit.html.twig' %}

{% use 'MinsalSiblhBundle:BlhAcidezAdmin:base_edit_form.html.twig' with form as parentForm %}

{% block form %}

    {{ block('parentForm') }}

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script type="text/javascript">

        jQuery(document).ready(function() {
            //////////////////////////////////////////////////////////////////////////////////////////////
            //////// calculate value
            //////////////////////////////////////////////////////////////////////////////////////////////
            jQuery('#{{ admin.uniqId }}_acidez1, #{{ admin.uniqId }}_acidez2, #{{ admin.uniqId }}_acidez3').on('keyup change blur', function (e) {
                var acidez1 = parseFloat(jQuery('#{{ admin.uniqId }}_acidez1').val());
                var acidez2 = parseFloat(jQuery('#{{ admin.uniqId }}_acidez2').val());
                var acidez3 = parseFloat(jQuery('#{{ admin.uniqId }}_acidez3').val());

                if (isNaN(acidez1) || jQuery.trim(acidez1).length === 0) {
                    acidez1 = 0;
                }
                if (isNaN(acidez2) || jQuery.trim(acidez2).length === 0) {
                    acidez2 = 0;
                }
                if (isNaN(acidez3) || jQuery.trim(acidez3).length === 0) {
                    acidez3 = 0;
                }
                var mediaAcidez = (acidez1 + acidez2 + acidez3) / 3;
                jQuery('#{{ admin.uniqId }}_mediaAcidez').val(mediaAcidez.toFixed(2));
            });
            //////////////////////////////////////////////////////////////////////////////////////////////
        });

    </script>
{% endblock %}