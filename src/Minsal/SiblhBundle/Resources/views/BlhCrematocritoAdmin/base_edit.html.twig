{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{#{% extends base_template %}#}
{% extends 'MinsalSiblhBundle:CRUD:base_edit.html.twig' %}

{% use 'MinsalSiblhBundle:BlhCrematocritoAdmin:base_edit_form.html.twig' with form as parentForm %}

{% block form %}

    {{ block('parentForm') }}

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    {# select2-es #}
    <script type="text/javascript" src="{{ asset('/bundles/sonataadmin/vendor/select2/select2_locale_es.js') }}" ></script>

    {# formValidation #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/formvalidation-master/dist/js/formValidation.min.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/formvalidation-master/dist/js/framework/bootstrap.min.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsiblh/plugin/formvalidation-master/dist/js/language/es_ES.js') }}" ></script>

    {% include 'MinsalSiblhBundle:General:general_form_script.html.twig' %}

    <script type="text/javascript">

        jQuery(document).ready(function() {
            //////////////////////////////////////////////////////////////////////////////////////////////
            //////// calculate value
            //////////////////////////////////////////////////////////////////////////////////////////////
            jQuery('#{{ admin.uniqId }}_crema1, #{{ admin.uniqId }}_crema2, #{{ admin.uniqId }}_crema3').on('keyup change blur', function (e) {
                var crema1 = parseFloat(jQuery('#{{ admin.uniqId }}_crema1').val());
                var crema2 = parseFloat(jQuery('#{{ admin.uniqId }}_crema2').val());
                var crema3 = parseFloat(jQuery('#{{ admin.uniqId }}_crema3').val());

                if (isNaN(crema1) || jQuery.trim(crema1).length === 0) {
                    crema1 = 0;
                }
                if (isNaN(crema2) || jQuery.trim(crema2).length === 0) {
                    crema2 = 0;
                }
                if (isNaN(crema3) || jQuery.trim(crema3).length === 0) {
                    crema3 = 0;
                }
                var mediaCrema = (crema1 + crema2 + crema3) / 3;
                jQuery('#{{ admin.uniqId }}_mediaCrema').val(mediaCrema.toFixed(2));
            });
            //////////////////////////////////////////////////////////////////////////////////////////////
            jQuery('#{{ admin.uniqId }}_ct1, #{{ admin.uniqId }}_ct2, #{{ admin.uniqId }}_ct3').on('keyup change blur', function (e) {
                var ct1 = parseFloat(jQuery('#{{ admin.uniqId }}_ct1').val());
                var ct2 = parseFloat(jQuery('#{{ admin.uniqId }}_ct2').val());
                var ct3 = parseFloat(jQuery('#{{ admin.uniqId }}_ct3').val());

                if (isNaN(ct1) || jQuery.trim(ct1).length === 0) {
                    ct1 = 0;
                }
                if (isNaN(ct2) || jQuery.trim(ct2).length === 0) {
                    ct2 = 0;
                }
                if (isNaN(ct3) || jQuery.trim(ct3).length === 0) {
                    ct3 = 0;
                }
                var mediaCt = (ct1 + ct2 + ct3) / 3;
                jQuery('#{{ admin.uniqId }}_mediaCt').val(mediaCt.toFixed(2));
            });
            //////////////////////////////////////////////////////////////////////////////////////////////
        });

    </script>
{% endblock %}